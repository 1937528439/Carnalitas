namespace = carn_religion

# Events relating to religions and religions interactions in Carnalitas
# 0001. seed dt traits for all characters
#

#
# 0001. A vassal agrees to emancipate illegal slaves they may hold.
# 0002. Add default slavery religious doctrines to newly created religions if they don't have them
#

carn_religion.0001 = {
	type = letter_event
	opening = {
		desc = religious_interaction.1.opening
	}
	desc = religious_interaction.2002.desc
	sender = scope:recipient

	immediate = {
		show_as_tooltip = { carn_free_illegal_slaves_effect = yes }
	}

	option = {
		name = religious_interaction.2002.a
	}
}

carn_religion.0002 = {
	type = empty
	hidden = yes

	trigger = {
		has_game_rule = carn_slavery_religious_doctrines_on
	}

	immediate = {
		if = {
			limit = { has_game_rule = carn_slavery_religious_doctrines_on }
			root.faith = {
				if = {
					limit = {
						NAND = {
							has_doctrine = carn_doctrine_same_slavery_crime
							has_doctrine = carn_doctrine_same_slavery_shunned
							has_doctrine = carn_doctrine_same_slavery_accepted
						}
					}
					add_doctrine = carn_doctrine_same_slavery_crime
				}
				if = {
					limit = {
						NAND = {
							has_doctrine = carn_doctrine_other_slavery_crime
							has_doctrine = carn_doctrine_other_slavery_shunned
							has_doctrine = carn_doctrine_other_slavery_accepted
						}
					}
					add_doctrine = carn_doctrine_other_slavery_accepted
				}
			}
		}
	}
}
